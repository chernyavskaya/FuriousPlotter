<draw>
#plots my_plot
saveAs png pdf root
outDir plots/HIG19018/28_05_2020/ 
plugins 'gStyle->SetOptStat("mre")' 'gStyle->SetLegendBorderSize(0)'  '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/FPCanvasStyle.C' '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/rootlogon.C' 
</draw>

variables MVAOutputTransformed
<info>
tuplesDir /eos/user/n/nchernya/HHbbgg_ntuples/HHbbgg_preselection_ntuples/18_02_2020_finalHHbbgg/
lumi16 35.9
lumi17 42.1
lumi18 59.5
lumi16sig 35900
lumi17sig 42100
lumi18sig 59500
</info>

<sw>
labels 'MVA Output'
bins 100 
min 0
max 1
</sw>


for iv,var variables
<my_plot_$var>

customize 'macro:FPCanvasStyle(this, "CMS", "136.8 fb^{-1} (13 TeV)", 0, "", 1)' 'SetLogy()'
#legendHeader 'Legend :'
legendXY 0.55 0.55 0.82 0.93 
#legendColumns 2
histos data sig ggh qqh vh tth
<data>
      src $info.tuplesDir[0]/output_DoubleEG_2016_2017_2018_04_02_2020.root Data_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut '1'
      customize 'SetTitle(";$sw.labels[$iv];Events")' 'SetMinimum(0.1)' 'SetMaximum(10*this->GetMaximum())'
      legendEntry 'Data' PE
      drawOptions PE 
</data>
<sig1>
       src $info.tuplesDir[0]/hh_2016_SMsignal_transformedMVA.root reducedTree
       var '$var'
       cut '$info.lumi16sig[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</sig1>
<sig2= sig1>
       src $info.tuplesDir[0]/hh_2016_SMsignal_transformedMVA.root  reducedTree
       cut '$info.lumi17sig[0]*weight'
</sig2> 
<sig3= sig1>
       src $info.tuplesDir[0]/hh_2016_SMsignal_transformedMVA.root reducedTree
       cut '$info.lumi18sig[0]*weight'
</sig3>
<sig>
       src my_plot_$var.sig1 my_plot_$var.sig2 my_plot_$var.sig3
       operations 'Add(Add(sig1, sig2),sig3)'
       customize+= 'SetLineColor(kRed)' 'SetMinimum(0.1)'
       legendEntry 'HH#rightarrow#gamma#gammab#bar{b} x 100' l
       drawOptions HIST 
</sig>



<ggh1>
       src $info.tuplesDir[0]/output_ggh_2016.root ggh2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</ggh1>
<ggh2= ggh1>
       src $info.tuplesDir[0]/output_ggh_2017.root ggh2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</ggh2> 
<ggh3= ggh1>
       src $info.tuplesDir[0]/output_ggh_2018.root ggh2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</ggh3>
<ggh>
       src my_plot_$var.ggh1 my_plot_$var.ggh2 my_plot_$var.ggh3
       operations 'Add(Add(ggh1, ggh2),ggh3)'
       customize+= 'SetLineColor(kAzure-3)' 'SetFillColor(kAzure+7)'  'SetMinimum(0.1)' 'SetFillStyle(3005)'
       legendEntry 'ggH' F
       drawOptions HIST
</ggh>


<qqh1>
       src $info.tuplesDir[0]/output_qqh_2016.root qqh2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</qqh1>
<qqh2= qqh1>
       src $info.tuplesDir[0]/output_qqh_2017.root qqh2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</qqh2> 
<qqh3= qqh1>
       src $info.tuplesDir[0]/output_qqh_2018.root qqh2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</qqh3>
<qqh>
       src my_plot_$var.qqh1 my_plot_$var.qqh2 my_plot_$var.qqh3
       operations 'Add(Add(qqh1, qqh2),qqh3)'
       customize+= 'SetLineColor(kGreen-2)' 'SetFillColor(kGreen-3)'   'SetMinimum(0.1)' 'SetFillStyle(3315)'

       legendEntry 'qqH' F
       drawOptions HIST
</qqh>

<vh1>
       src $info.tuplesDir[0]/output_vh_2016.root vh2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</vh1>
<vh2= vh1>
       src $info.tuplesDir[0]/output_vh_2017.root vh2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</vh2> 
<vh3= vh1>
       src $info.tuplesDir[0]/output_vh_2018.root vh2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</vh3>
<vh>
       src my_plot_$var.vh1 my_plot_$var.vh2 my_plot_$var.vh3
       operations 'Add(Add(vh1, vh2),vh3)'
       customize+= 'SetLineColor(kOrange-3)' 'SetFillColor(kOrange-2)'   'SetMinimum(0.1)' 'SetFillStyle(3352)'

       legendEntry 'vH' F
       drawOptions HIST
</vh>

<tth1>
       src $info.tuplesDir[0]/output_tth_2016.root tth2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</tth1>
<tth2= tth1>
       src $info.tuplesDir[0]/output_tth_2017.root tth2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</tth2> 
<tth3= tth1>
       src $info.tuplesDir[0]/output_tth_2018.root tth2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</tth3>
<tth>
       src my_plot_$var.tth1 my_plot_$var.tth2 my_plot_$var.tth3
       operations 'Add(Add(tth1, tth2),tth3)'
       customize+= 'SetLineColor(kBlue-7)' 'SetFillColor(kBlue-9)'  'SetMinimum(0.1)' 'SetFillStyle(3004)'
       legendEntry 'ttH' F
       drawOptions HIST
</tth>

</my_plot_$var>

draw.plots+= my_plot_$var
end
