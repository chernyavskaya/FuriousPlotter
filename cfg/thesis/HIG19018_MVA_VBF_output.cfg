<draw>
#plots my_plot
saveAs png pdf root C
outDir /afs/cern.ch/user/n/nchernya/www/HHbbgg/thesis/MVA_VBF_output_lt500/
plugins 'gStyle->SetOptStat("mre")' 'gStyle->SetLegendBorderSize(0)'  '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/FPCanvasStyle.C' '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/rootlogon.C' 
</draw>

<info>
tuplesDir /eos/user/n/nchernya/HHbbgg_ntuples/HHbbgg_preselection_ntuples/VBFHH_final_training_thesis/
</info>

variables MVAOutput MVAOutputTransformed 

#variables absCosTheta_gg absCosTheta_bb absCosThetaStar_CS customSubLeadingPhotonIDMVA customLeadingPhotonIDMVA diphotonPtOverdiHiggsM dijetPtOverdiHiggsM leadingJet_DeepFlavour subleadingJet_DeepFlavour sigmaMOverM sigmaMJets_gauss PhoJetMinDr PhoJetOtherDr leadingPhotonSigOverE subleadingPhotonSigOverE leadingJet_bRegNNResolution_gauss subleadingJet_bRegNNResolution_gauss leadingJet_pt_Over_Mjj subleadingJet_pt_Over_Mjj leadingPhoton_pt_Over_CMS_hgg_mass subleadingPhoton_pt_Over_CMS_hgg_mass VBFProd_eta VBFleadJet_pt_Over_VBFJet_mjj VBFsubleadJet_pt_Over_VBFJet_mjj VBFJet_mjj VBFsubleadJet_QGL VBFleadJet_QGL VBFJet_Delta_eta VBFCentrality_jg VBFCentrality_jb diHiggs_pt MX VBFDeltaR_jb VBFDeltaR_jg VBFsubleadJet_eta VBFleadJet_eta
<sw>
#labels '|cos(#theta_{#gamma#gamma})|' '|cos(#theta_{jj})|' '|cos#theta*|_{CS}' 'PhotonIDMVA2' 'PhotonIDMVA1' 'p_{T}(#gamma#gamma)/M_{jj#gamma#gamma}' 'p_{T}(jj)/M_{jj#gamma#gamma}' 'Deep Flavour leading jet' 'Deep Flavour subleading jet' '#sigma_{m_{#gamma#gamma}}/m_{#gamma#gamma}' '#sigma_{m_{jj}}/m_{jj}' 'min #DeltaR(#gamma,jet)' 'other #DeltaR(#gamma,jet)' 'Leading Photon #sigma_{E}/E' 'Subleading Photon #sigma_{E}/E' 'Leading Jet #sigma_{p_{T}}/p_{T}' 'Subleading Jet #sigma_{p_{T}}/p_{T}' 'p_{T}(j_{1})/m_{jj}' 'p_{T}(j_{2})/m_{jj}' 'p_{T}(#gamma_{1})/m_{#gamma#gamma}' 'p_{T}(#gamma_{2})/m_{#gamma#gamma}' '#eta_1^{VBF}x#eta_2^{VBF}' 'VBF leading jet p_{T}^{VBF}/m_{jj}^{VBF}' 'VBF subleading jet p_{T}^{VBF}/m_{jj}^{VBF}' 'm_{jj}^{VBF} (GeV)' 'VBF subleading jet QGL' 'VBF leading jet QGL' '|#Delta#eta^{VBF}|' 'C_{#gamma#gamma}' 'C_{jj}' 'diHiggs_pt (GeV)' '#tilde{M}_{X} (GeV)' 'min #DeltaR(jet,VBF jet)' 'min #DeltaR(#gamma,VBF jet)' 'VBF leading jet #eta' 'VBF subleading jet #eta'
 
#bins 50 50 50 50 50 50 50 50 50 50 50 50 40 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
#min  0 0 0 -1 -1 0 0 0 0   0   0  0 0   0   0    0   0   0 0 0 0   -20 0 0 0     0  0 0  0  0 0 0    0  0   -5 -5
#max  1 1 1  1  1 1 1 1 1  0.06 0.4 6 5  0.06 0.06 0.4 0.4  3 3 3 3  20 8 2.5 2000 1 1 10 1  1 1000 2500 6 6 5  5

labels 'VBF MVA' 'VBF MVA Transformed' 
#labels 'VBF MVA (High #tilde{M}_{X})' 'VBF MVA Transformed (High #tilde{M}_{X})' 
labels 'VBF MVA (Low #tilde{M}_{X})' 'VBF MVA Transformed (Low #tilde{M}_{X})' 
bins 100 100 
min 0 0 
max 1 1 

</sw>


for iv,var variables
<my_plot_$var>

#customize 'macro:FPCanvasStyle(this, "", "13 TeV", 0, "Simulation", 1)' 
customize 'macro:FPCanvasStyle(this, "", "13 TeV", 0, "Simulation", 1)' 'SetLogy()'\
          'macro:latex.SetTextFont(42); latex.SetTextSize(0.05)' \
          'macro:latex.DrawLatexNDC(0.22, 0.85, "#tilde{M}_{X} < 500 GeV")' 

#legendHeader 'Legend :'
#legendXY 0.55 0.55 0.82 0.93 
#legendXY 0.2 0.75 0.93 0.95 
legendXY 0.2 0.7 0.93 0.9
legendColumns 2
#histos dipho gjets sigSM sigc2v
histos diphogj ggf sigSM sigc2v

<dipho0>
      src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_DiPhotonJetsBox_ 
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight'
      customize 'SetMinimum(10E-04)'
</dipho0>

<dipho1>
      src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_DiPhotonJetsBox1BJet_ 
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight*overlapSave'
</dipho1>

<dipho2>
      src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_DiPhotonJetsBox2BJets_ 
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight*overlapSave'
</dipho2>

<gjets>
       src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_GJet_Pt_40toInf
       var '$var'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       cut 'weight'
       customize 'Scale(1./this->Integral())'  'SetLineColor(kSpring+5)' 'SetFillColor(kSpring+5)' 'SetFillStyle(3352)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(50*this->GetMaximum())'

       legendEntry '#gammaj + jets' F
       drawOptions HIST 
</gjets>


<dipho>
       src my_plot_$var.dipho0 my_plot_$var.dipho1 my_plot_$var.dipho2
       operations 'Add(Add(dipho0, dipho1),dipho2)'
       #customize 'SetTitle(";$sw.labels[$iv];Normalized to Unity")' 'Scale(1./this->Integral())'  'SetLineColor(kAzure-3)' 'SetFillColor(kAzure-3)' 'SetFillStyle(3325)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum(0.8*this->GetMinimum())'
       customize 'SetTitle(";$sw.labels[$iv];Normalized to Unity")' 'Scale(1./this->Integral())'  'SetLineColor(kAzure-3)' 'SetFillColor(kAzure-3)' 'SetFillStyle(3325)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(50*this->GetMaximum())' 'SetMinimum(10E-04)'

       legendEntry '#gamma#gamma + jets' F
       drawOptions HIST 
</dipho>

<diphogj>
       src my_plot_$var.dipho0 my_plot_$var.dipho1 my_plot_$var.dipho2 my_plot_$var.gjets
       operations 'Add(Add(Add(dipho0, dipho1),dipho2),gjets)'
       #customize 'SetTitle(";$sw.labels[$iv];Normalized to Unity")' 'Scale(1./this->Integral())'  'SetLineColor(kAzure-3)' 'SetFillColor(kAzure-3)' 'SetFillStyle(3325)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum(0.8*this->GetMinimum())'
       customize 'SetTitle(";$sw.labels[$iv];Normalized to Unity")' 'Scale(1./this->Integral())'  'SetLineColor(kAzure-3)' 'SetFillColor(kAzure-3)' 'SetFillStyle(3325)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(50*this->GetMaximum())' 'SetMinimum(10E-04)'

       legendEntry '#gamma#gamma/#gammaj + jets' F
       drawOptions HIST 
</diphogj>


<sigSM>
       src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_VBFHHTo2B2G_CV_1_C2V_1_C3_1 
       var '$var'
       cut 'weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       #customize+= 'SetLineColor(kRed)'  'Scale(1./this->Integral())' 'SetLineStyle(1)' 'SetLineWidth(2)' 'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum($sw.ymin[$iv])'
       customize+= 'SetLineColor(kRed)'  'Scale(1./this->Integral())' 'SetLineStyle(1)' 'SetLineWidth(2)'
       legendEntry 'VBF SM' l
       drawOptions HIST 
</sigSM>

<sigc2v>
       src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_VBFHHTo2B2G_CV_1_C2V_0_C3_1
       var '$var'
       cut 'weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       #customize+= 'SetLineColor(kRed)'  'Scale(1./this->Integral())' 'SetLineStyle(1)' 'SetLineWidth(2)' 'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum($sw.ymin[$iv])'
       customize+= 'SetLineColor(kSpring+9)'  'Scale(1./this->Integral())' 'SetLineStyle(9)' 'SetLineWidth(2)'
       legendEntry 'VBF c_{2V}=0' l
       drawOptions HIST 
</sigc2v>

<ggf>
       src $info.tuplesDir[0]/Total_preselection_RunII_15_06_2020_MX_lt_500_transformedMVA.root reducedTree_bkg_hh_LO
       var '$var'
       cut 'weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       #customize+= 'SetLineColor(kRed)'  'Scale(1./this->Integral())' 'SetLineStyle(1)' 'SetLineWidth(2)' 'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum($sw.ymin[$iv])'
       customize+= 'SetLineColor(kBlack)'  'Scale(1./this->Integral())' 'SetLineStyle(7)' 'SetLineWidth(2)'
       legendEntry 'ggF HH' l
       drawOptions HIST 
</ggf>

</my_plot_$var>

draw.plots+= my_plot_$var
end
