<draw>
#plots my_plot
saveAs png pdf root
outDir /afs/cern.ch/user/n/nchernya/www/HHbbgg/thesis/MVA_ggF_log/
plugins 'gStyle->SetOptStat("mre")' 'gStyle->SetLegendBorderSize(0)'  '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/FPCanvasStyle.C' '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/rootlogon.C' 
</draw>

<info>
tuplesDir /eos/user/n/nchernya/HHbbgg_ntuples/HHbbgg_preselection_ntuples/20192401_wo_Mjj_leptonveto_flashgg/
</info>

variables MVAOutput MVAOutputTransformed 

#variables absCosTheta_gg absCosTheta_bb absCosThetaStar_CS customSubLeadingPhotonIDMVA customLeadingPhotonIDMVA diphotonPtOverdiHiggsM dijetPtOverdiHiggsM leadingJet_DeepFlavour subleadingJet_DeepFlavour sigmaMOverM sigmaMJets_gauss PhoJetMinDr PhoJetOtherDr leadingPhotonSigOverE subleadingPhotonSigOverE leadingJet_bRegNNResolution_gauss subleadingJet_bRegNNResolution_gauss leadingJet_pt_Over_Mjj subleadingJet_pt_Over_Mjj leadingPhoton_pt_Over_CMS_hgg_mass subleadingPhoton_pt_Over_CMS_hgg_mass
<sw>
#labels '|cos(#theta_{#gamma#gamma})|' '|cos(#theta_{jj})|' '|cos#theta*|_{CS}' 'Photon ID #gamma_2' 'Photon ID #gamma_1' 'p_{T}(#gamma#gamma)/M_{jj#gamma#gamma}' 'p_{T}(jj)/M_{jj#gamma#gamma}' 'Deep Flavour leading jet' 'Deep Flavour subleading jet' '#sigma_{m_{#gamma#gamma}}/m_{#gamma#gamma}' '#sigma_{m_{jj}}/m_{jj}' 'min #DeltaR(#gamma,jet)' 'other #DeltaR(#gamma,jet)' 'Leading Photon #sigma_{E}/E' 'Subleading Photon #sigma_{E}/E' 'Leading Jet #sigma_{p_{T}}/p_{T}' 'Subleading Jet #sigma_{p_{T}}/p_{T}' 'p_{T}(j_{1})/m_{jj}' 'p_{T}(j_{2})/m_{jj}' 'p_{T}(#gamma_{1})/m_{#gamma#gamma}' 'p_{T}(#gamma_{2})/m_{#gamma#gamma}'
#bins 50 50 50 50 50 50 50 50 50 50 50 50 40 50 50 50 50 50 50 50 50  
#min  0 0 0 -1 -1 0 0 0 0   0   0  0 0   0   0    0   0   0 0 0 0
#max  1 1 1  1  1 1 1 1 1  0.06 0.4 6 5  0.06 0.06 0.4 0.4  3 3 3 3

labels 'ggF MVA' 'ggF MVA Transformed' 
bins 100 100 
min 0 0 
max 1 1 

</sw>


for iv,var variables
<my_plot_$var>

#customize 'macro:FPCanvasStyle(this, "", "13 TeV", 0, "Simulation", 1)' 
customize 'macro:FPCanvasStyle(this, "", "13 TeV", 0, "Simulation", 1)' 'SetLogy()'

#legendHeader 'Legend :'
#legendXY 0.55 0.55 0.82 0.93 
legendXY 0.2 0.75 0.93 0.95 
legendColumns 2
histos dipho gjets sig

<dipho0>
      src $info.tuplesDir[0]/output_DiPhotonJetsBox__2017.root DiPhotonJetsBox_MGG_80toInf_13TeV_Sherpa_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight'
      customize  'SetMinimum(10E-04)'
</dipho0>

<dipho1>
      src $info.tuplesDir[0]/output_DiPhotonJetsBox1BJet_2017.root DiPhotonJetsBox1BJet_MGG_80toInf_13TeV_Sherpa_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight*overlapSave'
</dipho1>

<dipho2>
      src $info.tuplesDir[0]/output_DiPhotonJetsBox2BJets_2017.root DiPhotonJetsBox2BJets_MGG_80toInf_13TeV_Sherpa_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight*overlapSave'
</dipho2>


<dipho>
       src my_plot_$var.dipho0 my_plot_$var.dipho1 my_plot_$var.dipho2
       operations 'Add(Add(dipho0, dipho1),dipho2)'
       #customize 'SetTitle(";$sw.labels[$iv];Normalized to Unity")' 'Scale(1./this->Integral())'  'SetLineColor(kAzure-3)' 'SetFillColor(kAzure-3)' 'SetFillStyle(3325)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum(0.8*this->GetMinimum())'
       customize 'SetTitle(";$sw.labels[$iv];Normalized to Unity")' 'Scale(1./this->Integral())'  'SetLineColor(kAzure-3)' 'SetFillColor(kAzure-3)' 'SetFillStyle(3325)'  'SetLineStyle(1)' 'SetLineWidth(2)'  'SetMaximum(50*this->GetMaximum())' 'SetMinimum(10E-04)'

       legendEntry '#gamma#gamma + jets' F
       drawOptions HIST 
</dipho>


<gjets0>
      src $info.tuplesDir[0]/output_GJet_Pt-20to40_2017.root  GJet_Pt_20to40_DoubleEMEnriched_MGG_80toInf_TuneCP5_13TeV_Pythia8_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight'
</gjets0>

<gjets1>
      src $info.tuplesDir[0]/output_GJet_Pt-40toInf_2017.root GJet_Pt_40toInf_DoubleEMEnriched_MGG_80toInf_TuneCP5_13TeV_Pythia8_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut 'weight'
</gjets1>

<gjets>
       src my_plot_$var.gjets0 my_plot_$var.gjets1
       operations 'Add(gjets0,gjets1))'
       customize 'Scale(1./this->Integral())'  'SetLineColor(kSpring+5)' 'SetFillColor(kSpring+5)' 'SetFillStyle(3352)'  'SetLineStyle(1)' 'SetLineWidth(2)'

       legendEntry '#gammaj + jets' F
       drawOptions HIST 
</gjets>

<sig>
       src $info.tuplesDir[0]/hh_2017_SMsignal_transformedMVA.root reducedTree
       var '$var'
       cut 'weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       #customize+= 'SetLineColor(kRed)'  'Scale(1./this->Integral())' 'SetLineStyle(1)' 'SetLineWidth(2)' 'SetMaximum(1.3*this->GetMaximum())' 'SetMinimum($sw.ymin[$iv])'
       customize+= 'SetLineColor(kRed)'  'Scale(1./this->Integral())' 'SetLineStyle(1)' 'SetLineWidth(2)'
       legendEntry 'ggF HH#rightarrow#gamma#gammab#bar{b}' l
       drawOptions HIST 
</sig>


</my_plot_$var>

draw.plots+= my_plot_$var
end
