<draw>
#plots my_plot
saveAs png pdf root
outDir /afs/cern.ch/user/n/nchernya/www/HHbbgg/thesis/MVA_ggF/
#plots/HIG19018/28_05_2020/ 
plugins 'gStyle->SetOptStat("mre")' 'gStyle->SetLegendBorderSize(0)'  '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/FPCanvasStyle.C' '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/rootlogon.C' 
</draw>

<info>
tuplesDir /eos/user/n/nchernya/HHbbgg_ntuples/HHbbgg_preselection_ntuples/18_02_2020_finalHHbbgg/
lumi16 35.9
lumi17 41.5
lumi18 59.4
#lumisig is multiplied with xsec x BR = 31.05*0.58*0.00227*2 
lumi16sig 2935.2
lumi17sig 3393.1
lumi18sig 4856.5
</info>

#variables MVAOutputTransformed Mjj CMS_hgg_mass MX absCosTheta_gg absCosTheta_bb absCosThetaStar_CS ttHScore
#variables Mjj CMS_hgg_mass MX 
variables MVAOutput MVAOutputTransformed  ttHScore
<sw>
#labels 'ggF MVA Output' 'm_{jj} (GeV)' 'm_{#gamma#gamma} (GeV)' '#tilde{M}_{X} (GeV)' '|cos(#theta_{#gamma#gamma})|' '|cos(#theta_{jj})|' '|cos#theta*|_{CS}' 'ttHScore'
#bins 100 60 80 75 100 100 100 100 
#min 0 70 100 250 0 0 0 0
#max 1 190 180 1000 1 1 1 1
#ymin 0.1 0.1 0.6 0.1 0.1 0.1 0.1 0.1
 
#labels  'm_{jj} (GeV)' 'm_{#gamma#gamma} (GeV)' '#tilde{M}_{X} (GeV)' 
#bins 60 80 75 
#min 70 100 250 
#max 190 180 1000 
#ymin 0.1 0.6 0.1 

labels 'ggF MVA' 'ggF MVA Transformed'  'ttHScore'
bins 100 100 100 
min 0 0 0
max 1 1 1
ymin 0.1 0.1 0.1
</sw>


for iv,var variables
<my_plot_$var>

customize 'macro:FPCanvasStyle(this, "CMS", "137 fb^{-1} (13 TeV)", 0, "", 1)' 'SetLogy()'
#legendHeader 'Legend :'
#legendXY 0.55 0.55 0.82 0.93 
legendXY 0.2 0.75 0.93 0.95 
legendColumns 3
histos data ggh qqh sig vh tth
<data>
      src $info.tuplesDir[0]/output_DoubleEG_2016_2017_2018_04_02_2020.root Data_13TeV_DoubleHTag_0
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut '1'
      #customize 'SetTitle(";$sw.labels[$iv];Events / %.0f%this->GetBinWidth(1) GeV")' 'SetMinimum($sw.ymin[$iv])' 'SetMaximum(50*this->GetMaximum())'
      customize 'SetTitle(";$sw.labels[$iv];Events / %.2f%this->GetBinWidth(1)")' 'SetMinimum($sw.ymin[$iv])' 'SetMaximum(50*this->GetMaximum())'
      legendEntry 'Data' PE
      drawOptions PE 
</data>
<sig1>
       src $info.tuplesDir[0]/hh_2016_SMsignal_transformedMVA.root reducedTree
       var '$var'
       cut '$info.lumi16sig[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</sig1>
<sig2= sig1>
       src $info.tuplesDir[0]/hh_2016_SMsignal_transformedMVA.root  reducedTree
       cut '$info.lumi17sig[0]*weight'
</sig2> 
<sig3= sig1>
       src $info.tuplesDir[0]/hh_2016_SMsignal_transformedMVA.root reducedTree
       cut '$info.lumi18sig[0]*weight'
</sig3>
<sig>
       src my_plot_$var.sig1 my_plot_$var.sig2 my_plot_$var.sig3
       operations 'Add(Add(sig1, sig2),sig3)'
       customize+= 'SetLineColor(kRed)' 'SetMinimum($sw.ymin[$iv])'
       legendEntry 'ggF HH#rightarrow#gamma#gammab#bar{b} x 10^{3}' l
       drawOptions HIST 
</sig>



<ggh1>
       src $info.tuplesDir[0]/output_ggh_2016.root ggh2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</ggh1>
<ggh2= ggh1>
       src $info.tuplesDir[0]/output_ggh_2017.root ggh2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</ggh2> 
<ggh3= ggh1>
       src $info.tuplesDir[0]/output_ggh_2018.root ggh2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</ggh3>
<ggh>
       src my_plot_$var.ggh1 my_plot_$var.ggh2 my_plot_$var.ggh3
       operations 'Add(Add(ggh1, ggh2),ggh3)'
       customize+= 'SetLineColor(kAzure-3)' 'SetFillColor(kAzure+7)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3005)'
       legendEntry 'ggH' F
       drawOptions HIST
</ggh>


<qqh1>
       src $info.tuplesDir[0]/output_qqh_2016.root qqh2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</qqh1>
<qqh2= qqh1>
       src $info.tuplesDir[0]/output_qqh_2017.root qqh2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</qqh2> 
<qqh3= qqh1>
       src $info.tuplesDir[0]/output_qqh_2018.root qqh2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</qqh3>
<qqh>
       src my_plot_$var.qqh1 my_plot_$var.qqh2 my_plot_$var.qqh3
       operations 'Add(Add(qqh1, qqh2),qqh3)'
       customize+= 'SetLineColor(kGreen-2)' 'SetFillColor(kGreen-3)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3315)'

       legendEntry 'VBF H' F
       drawOptions HIST
</qqh>

<vh1>
       src $info.tuplesDir[0]/output_vh_2016.root vh2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</vh1>
<vh2= vh1>
       src $info.tuplesDir[0]/output_vh_2017.root vh2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</vh2> 
<vh3= vh1>
       src $info.tuplesDir[0]/output_vh_2018.root vh2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</vh3>
<vh>
       src my_plot_$var.vh1 my_plot_$var.vh2 my_plot_$var.vh3
       operations 'Add(Add(vh1, vh2),vh3)'
       customize+= 'SetLineColor(kOrange-3)' 'SetFillColor(kOrange-2)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3352)'

       legendEntry 'VH' F
       drawOptions HIST
</vh>

<tth1>
       src $info.tuplesDir[0]/output_tth_2016.root tth2016_13TeV_125_13TeV_DoubleHTag_0
       var '$var'
       cut '$info.lumi16[0]*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
</tth1>
<tth2= tth1>
       src $info.tuplesDir[0]/output_tth_2017.root tth2017_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi17[0]*weight'
</tth2> 
<tth3= tth1>
       src $info.tuplesDir[0]/output_tth_2018.root tth2018_13TeV_125_13TeV_DoubleHTag_0
       cut '$info.lumi18[0]*weight'
</tth3>
<tth>
       src my_plot_$var.tth1 my_plot_$var.tth2 my_plot_$var.tth3
       operations 'Add(Add(tth1, tth2),tth3)'
       customize+= 'SetLineColor(kBlue-7)' 'SetFillColor(kBlue-9)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3004)'
       legendEntry 't#bar{t}H' F
       drawOptions HIST
</tth>

</my_plot_$var>

draw.plots+= my_plot_$var
end
