<draw>
#plots my_plot
saveAs png pdf root
#outDir /afs/cern.ch/user/n/nchernya/www/HHbbgg/paper/DataMC/06_07_2020_VBF/
#outDir /afs/cern.ch/user/n/nchernya/www/HHbbgg/paper/DataMC/06_07_2020_VBF_MXgt500/
outDir /afs/cern.ch/user/n/nchernya/www/HHbbgg/paper/DataMC/28_09_2020_VBF_MXgt500/
#plots/HIG19018/28_05_2020/ 
plugins 'gStyle->SetOptStat("mre")' 'gStyle->SetLegendBorderSize(0)'  '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/FPCanvasStyle.C' '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/rootlogon.C' 
</draw>

<info>
tuplesDir /eos/user/n/nchernya/HHbbgg_ntuples/VBFHH_preselection/MVAapplied/
lumi16 35.9
lumi17 41.5
lumi18 59.4
VBFSMxsec 4.544  #1.726*0.58*0.00227*2, x 1000
VBFC2V0xsec 70.727 #26.86*0.58*0.00227*2*1000.
</info>

#variables MVAOutputTransformed Mjj CMS_hgg_mass MX absCosTheta_gg absCosTheta_bb absCosThetaStar_CS ttHScore
#variables Mjj CMS_hgg_mass MX 
#variables MVAOutputTransformed  ttHScore
variables MVAOutputTransformed
<sw>
#labels 'ggF MVA Output' 'm_{jj} (GeV)' 'm_{#gamma#gamma} (GeV)' '#tilde{M}_{X} (GeV)' '|cos(#theta_{#gamma#gamma})|' '|cos(#theta_{jj})|' '|cos#theta*|_{CS}' 'ttHScore'
#bins 100 60 80 75 100 100 100 100 
#min 0 70 100 250 0 0 0 0#max 1 190 180 1000 1 1 1 1
#max 1 190 180 1000 1 1 1 1
#ymin 0.1 0.1 0.6 0.1 0.1 0.1 0.1 0.1
 
#labels  'm_{jj} (GeV)' 'm_{#gamma#gamma} (GeV)' '#tilde{M}_{X} (GeV)' 
#bins 60 80 75 
#min 70 100 250 
#max 190 180 1000 
#ymin 0.1 0.6 0.1 

#labels 'ggF MVA Output'  'ttHScore'
#bins 100 100 
#min 0 0
#max 1 1
#ymin 0.1 0.1

##labels 'VBF MVA Output 0'    ##>500
##labels 'VBF MVA Output 1'   ##<500
labels 'VBF MVA (High #tilde{M}_{X})'    ##>500
#labels 'VBF MVA (Low #tilde{M}_{X})'    ##<500
bins 100  
min 0 
max 1 
ymin 0.025 
</sw>


for iv,var variables
<my_plot_$var>

customize 'macro:FPCanvasStyle(this, "CMS", "137 fb^{-1} (13 TeV)", 0, "", 1)' 'SetLogy()'\
          'macro:latex.SetTextFont(42); latex.SetTextSize(0.05)' \
          'macro:latex.DrawLatexNDC(0.22, 0.85, "#tilde{M}_{X} > 500 GeV")' \
          'macro:latex.SetTextFont(42); latex.SetTextSize(0.05)' \
          'macro:latex.DrawLatexNDC(0.26, 0.64, "c_{2V} = 0 VBF HH x 10^{3}")'\
          'macro:line.SetLineColor(kSpring+9);line.SetLineWidth(2);line.SetLineStyle(9);line.DrawLineNDC(0.21,0.68,0.256,0.68) '

#customize 'macro:line.DrawNDC(...)'
#customize 'macro:line.DrawTextNDC(0.5,0.7,'test')'
#legendHeader 'Legend :'
#legendXY 0.55 0.55 0.82 0.93 
#legendXY 0.2 0.75 0.93 0.95 
legendXY 0.2 0.7 0.93 0.9
legendColumns 3
histos data ggh qqh sig vh tth sig2
<data>
      src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_DoubleEG 
      var '$var'
      bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
      cut '1'
      #customize 'SetTitle(";$sw.labels[$iv];Events / %.0f%this->GetBinWidth(1) GeV")' 'SetMinimum($sw.ymin[$iv])' 'SetMaximum(50*this->GetMaximum())'
      customize 'SetTitle(";$sw.labels[$iv];Events / %.2f%this->GetBinWidth(1)")' 'SetMinimum($sw.ymin[$iv])' 'SetMaximum(50*this->GetMaximum())'
      legendEntry 'Data' PE
      drawOptions PE 
</data>
<sig>
       src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_VBFHHTo2B2G_CV_1_C2V_1_C3_1
       var '$var'
       cut 'lumi*weight*$info.VBFSMxsec[0]'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       customize+= 'SetLineColor(kRed)' 'SetMinimum($sw.ymin[$iv])'
       #legendEntry 'HH VBF #rightarrow#gamma#gammab#bar{b} x 10^{3}' l
       legendEntry 'SM VBF HH x 10^{3}' l
       drawOptions HIST 
</sig>

<sig2>
       src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_VBFHHTo2B2G_CV_1_C2V_0_C3_1
       var '$var'
       cut 'lumi*weight*$info.VBFC2V0xsec[0]'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       customize+= 'SetLineColor(kSpring+9)' 'SetMinimum($sw.ymin[$iv])' 'SetLineStyle(9)'
       drawOptions HIST 
</sig2>
<ggh>
       src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_ggh 
       var '$var'
       cut 'lumi*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       customize+= 'SetLineColor(kAzure-3)' 'SetFillColor(kAzure+7)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3005)'
       legendEntry 'ggH' F
       drawOptions HIST
</ggh>


<qqh>
       src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_qqh 
       var '$var'
       cut 'lumi*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       customize+= 'SetLineColor(kGreen-2)' 'SetFillColor(kGreen-3)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3315)'

       legendEntry 'VBF H' F
       drawOptions HIST
</qqh>

<vh>
       src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_vh 
       var '$var'
       cut 'lumi*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       customize+= 'SetLineColor(kOrange-3)' 'SetFillColor(kOrange-2)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3352)'
       legendEntry 'VH' F
       drawOptions HIST
</vh>

<tth>
       src $info.tuplesDir[0]/Total_preselection_diffNaming_2016_2017_2018_12_06_2020_MX_gt_500.root reducedTree_bkg_tth 
       var '$var'
       cut 'lumi*weight'
       bins $sw.bins[$iv] $sw.min[$iv] $sw.max[$iv]
       customize+= 'SetLineColor(kBlue-7)' 'SetFillColor(kBlue-9)' 'SetMinimum($sw.ymin[$iv])' 'SetFillStyle(3004)'
       legendEntry 't#bar{t}H' F
       drawOptions HIST
</tth>

</my_plot_$var>

draw.plots+= my_plot_$var
end
